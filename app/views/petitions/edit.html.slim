
div.page

  section class=(@petition.images.first.nil? ? 'petition-intro-container-noimage' : 'petition-intro-container') id="introContainer"
    div.petition-intro-image-container
      = image_tag( @petition.images.first.upload.url, class: 'petition-intro-image') unless @petition.images.first.nil? || @petition.images.first.upload_file_name.nil?
    div.petition-intro-info-container
      h1.petition-intro-info-title= @petition.name
      div.petition-intro-info-counter= t('show.signatures_count', count: @petition.signatures_count)
      div.petition-intro-info-text
        p= @petition.description

    /<!-- editbutton -->
    div class="petition-editbutton-container"
      div class="petition-editbutton" onclick=="$('.petition-intro-container.edit').show(); $('#introContainer').hide();"
        = t 'edit.petition.edittext'
    /<!-- /editbutton -->

  section class="petition-intro-container edit"
    div.petition-edit-close-button onclick=="$(this).parent('.edit').hide(); $('#introContainer').show();"

    /h1.petition-section-title 
    /  = t 'petition.editing'
    /  =<> t 'petition.language'
    /  =<> I18n.locale
    
    = render 'form'

  section.petition-container id="petitionState"
    div.petition-text-wrapper
      h2.petition-section-title= t('show.petition.title')
      div.petition-text
        h3= t('show.petition.we')
        p= @petition.initiators
        p &nbsp;

        h3= t('show.petition.observe')
        p= @petition.statement
        p &nbsp;

        h3= t('show.petition.request')
        p= @petition.request

    javascript:
      var petition_state_summary = '#{@petition.state_summary}' || 'draft';

    div.petition-form-wrapper
      div.petition-form-indication-wrapper
        h2 class="petition-section-title"
          = t "petition.current_state_is"
        div.petition-state-container
          div id="draft" class="petition-state-label" 
            = t "petition.state.not_yet_finished"
          div id="signable" class="petition-state-label"
              = t "petition.signable"
          div id="closed" class="petition-state-label"
            = t "petition.closed"
          div id="in_treatment" class="petition-state-label"
            = t "petition.in_treatment"
          div id="is_answered" class="petition-state-label"
            = t "petition.is_answered"

  section.petition-container id="petitionStateEdit" style="display: none"
    div.petition-text-wrapper
      h2.petition-section-title= t('show.petition.title')
      div.petition-text
        h3= t('show.petition.we')
        p= @petition.initiators
        p &nbsp;

        h3= t('show.petition.observe')
        p= @petition.statement
        p &nbsp;

        h3= t('show.petition.request')
        p= @petition.request

    div.petition-form-wrapper 
      div onclick=="$('#petitionState').css('display','flex'); $('#petitionStateEdit').hide();" class="petition-edit-close-button"
      div class="petition-form-indication-wrapper"
        h2 class="petition-section-title"
          = t 'petition.current_state_is'
        div.whitespace
          What voor tekst moet hier?  
          <br>
          Ik zou het niet weten.. 
          <br>
          Uitleg over status denk ik..  
        select.petition-form-indication-dropdown id='petitionstate'
          option value="concept" 
            = t "petition.state.not_yet_finished"
          option value="live"
            = t "petition.signable"
          option value="to_process"
            = t "petition.closed"
          option value="in_process"
            = t "petition.in_treatment"
          option value="completed"
            = t "petition.is_answered"

  /<!-- editbutton -->
  // We should put the next appropiate action here
  // not a set state function.
  div.petition-editbutton-container style="margin:-20px 0 0; padding:0 0 30px;"
    div.petition-editbutton onclick=="$('#petitionStateEdit').css('display','flex'); $('#petitionState').hide();"
      = t 'petition.edit_state'

  div.petition-editbutton-container style="margin:-20px 0 0; padding:0 0 30px;"
    div.petition-editbutton 
      = t 'petition.the_next_logical_action'

  div.petition-editbutton-container style="margin:-20px 0 0; padding:0 0 30px;"
    div.petition-editbutton 
      = t 'petition.another_possible_action'

  /<!-- /editbutton -->


  / - if current_user && (current_user.has_role? :admin or current_user.has_role? :admin, @petition)
  div.whitespace
    = link_to t('petition.pdf'), petition_signatures_path(@petition, :pdf), targer: :blank, class: 'button'
  
  div.whitespace
    = link_to t('petition.csv'), petition_signatures_path(@petition, :csv), targer: :blank, class: 'button'

  section.petition-container id="petitionprogres"
    div.petition-text-wrapper
      h2.petition-section-title= t('show.petition.news')
      div.petition-text 
        h3 report on news about your petition
        h3 Gemeente X
        p blabla 
        p &nbsp;

        h3 Wij willen vluchtelingen 
        p statement
        p &nbsp;

        h3 We zijn de weg kwijt!
        p request

    div.petition-form-wrapper
      div.petition-form-indication-wrapper
        h2 class="petition-section-title"
          = t "petition.current_news_is"
        p hier komt nieuws!


= render partial: 'social'


/ - if user_signed_in?
/   - if current_user.has_role? :admin or current_user.has_role? :admin, @petition

/     h1 Admin Petition options.. TODO

/     == render 'admin_form'
